<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1789px" preserveAspectRatio="none" style="width:908px;height:1789px;background:#FFFFFF;" version="1.1" viewBox="0 0 908 1789" width="908px" zoomAndPan="magnify"><defs><filter height="300%" id="f1m3692ejtygng" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[e4bc94fd1bcaf729bb8f359c66f536d9]
cluster ID-Connector--><rect fill="#EBEDF1" filter="url(#f1m3692ejtygng)" height="763" style="stroke:#000000;stroke-width:1.5;" width="442" x="7" y="931.5"/><path d="M121,931.5 L121,940.7969 L111,950.7969 L7,950.7969 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="104" x="10" y="945.4951">ID-Connector</text><!--MD5=[599b346dd6cce547b90978a220dfc604]
cluster Test--><polygon fill="#B0CAE4" filter="url(#f1m3692ejtygng)" points="698,6,739,6,746,28.2969,826,28.2969,826,93,698,93,698,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="698" x2="746" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="35" x="702" y="20.9951">Test</text><!--MD5=[194aa454895f181ee76f84c49e4a9079]
entity management_api--><rect fill="#438DD5" filter="url(#f1m3692ejtygng)" height="101.4844" style="stroke:#6A8198;stroke-width:1.5;" width="195" x="238.5" y="1318.5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="175" x="248.5" y="1341.4951">Management REST API</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="44" x="314" y="1357.792">fastapi</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="338" y="1374.0889"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="273.5" y="1390.3857">stops events from</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="289.5" y="1406.6826">reaching ldap</text><!--MD5=[821805f5c38fda95533ab32586264233]
entity large_in_queue--><polygon fill="#B0CAE4" filter="url(#f1m3692ejtygng)" points="246.5,1154.5,292.5,1154.5,299.5,1175.5,425.5,1175.5,425.5,1257.6875,246.5,1257.6875,246.5,1154.5" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="246.5" x2="299.5" y1="1175.5" y2="1175.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="120" x="271" y="1195.4951">Large in-queue</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="43" x="309.5" y="1211.792">Folder</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="333" y="1228.0889"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="256.5" y="1244.3857">json files with full data</text><!--MD5=[20530a36e6ab6ae76aff214754e4fc5b]
entity uuid_record_cache--><path d="M247.5,976.5 C247.5,966.5 336,966.5 336,966.5 C336,966.5 424.5,966.5 424.5,976.5 L424.5,1083.2813 C424.5,1093.2813 336,1093.2813 336,1093.2813 C336,1093.2813 247.5,1093.2813 247.5,1083.2813 L247.5,976.5 " fill="#85BBF0" filter="url(#f1m3692ejtygng)" style="stroke:#000000;stroke-width:1.5;"/><path d="M247.5,976.5 C247.5,986.5 336,986.5 336,986.5 C336,986.5 424.5,986.5 424.5,976.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="147" x="262.5" y="1003.4951">UUID record cache</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="36" x="318" y="1019.792">sqlite</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="338" y="1036.0889"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="288.5" y="1052.3857">stores uuid-&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="257.5" y="1068.6826">(record_uid,school, ...)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="306" y="1084.9795">mapping</text><!--MD5=[b2a0eeef433f628869ec8b6805c48dbf]
entity async_job--><rect fill="#438DD5" filter="url(#f1m3692ejtygng)" height="101.4844" style="stroke:#6A8198;stroke-width:1.5;" width="180" x="23" y="1318.5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="77" x="74.5" y="1341.4951">Async job</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="49" x="88.5" y="1357.792">python</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="115" y="1374.0889"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="33" y="1390.3857">puts json files into right</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="79" y="1406.6826">out queue</text><!--MD5=[aa495e3eb3961d298bd459a654c16499]
entity out_queue_a--><polygon fill="#B0CAE4" filter="url(#f1m3692ejtygng)" points="56,1504,102,1504,109,1525,176,1525,176,1558.2969,56,1558.2969,56,1504" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="56" x2="109" y1="1525" y2="1525"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="66" y="1544.9951">out_queue_a</text><!--MD5=[8021323f67cea1c74145feef327135cf]
entity out_queue_b--><polygon fill="#B0CAE4" filter="url(#f1m3692ejtygng)" points="244.5,1504,290.5,1504,297.5,1525,365.5,1525,365.5,1558.2969,244.5,1558.2969,244.5,1504" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="244.5" x2="297.5" y1="1525" y2="1525"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="254.5" y="1544.9951">out_queue_b</text><!--MD5=[02d40d299676c8ea51b3d02e8ed2258d]
entity out_a--><rect fill="#438DD5" filter="url(#f1m3692ejtygng)" height="36.2969" style="stroke:#6A8198;stroke-width:1.5;" width="58" x="87" y="1642.5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="97" y="1665.4951">out_a</text><!--MD5=[6092215e3515c37d02fcdd5d840fc6cc]
entity out_b--><rect fill="#438DD5" filter="url(#f1m3692ejtygng)" height="36.2969" style="stroke:#6A8198;stroke-width:1.5;" width="59" x="275.5" y="1642.5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="285.5" y="1665.4951">out_b</text><!--MD5=[36fbf14ce84cc7bd5ad7ce8e5f76da03]
entity entryUUIDs--><polygon fill="#D3D3D3" filter="url(#f1m3692ejtygng)" points="713.5,41,713.5,77.2969,810.5,77.2969,810.5,51,800.5,41,713.5,41" style="stroke:#000000;stroke-width:1.5;"/><path d="M800.5,41 L800.5,51 L810.5,51 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="723.5" y="63.9951">entryUUIDs</text><!--MD5=[893b01c522ea618c375ef8b789c1bb17]
entity sms--><rect fill="#438DD5" filter="url(#f1m3692ejtygng)" height="85.1875" style="stroke:#6A8198;stroke-width:1.5;" width="256" x="422" y="16.5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="236" x="432" y="39.4951">School management software</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="104" x="498" y="55.792">custom system</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="552" y="72.0889"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203" x="448.5" y="88.3857">manages users on state level</text><!--MD5=[6b4bfa9e00b0b9cc08101d1a1ff13128]
entity import--><rect fill="#85BBF0" filter="url(#f1m3692ejtygng)" height="85.1875" rx="35" ry="35" style="stroke:#000000;stroke-width:1.5;" width="175" x="462.5" y="193.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="155" x="472.5" y="216.4951">UCS@School import</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="49" x="525.5" y="232.792">python</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="552" y="249.0889"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="493.5" y="265.3857">Import user data</text><!--MD5=[1be1e8e9c1fa15d6e082466842209191]
entity ldap--><path d="M490,349.5 C490,339.5 550,339.5 550,339.5 C550,339.5 610,339.5 610,349.5 L610,439.9844 C610,449.9844 550,449.9844 550,449.9844 C550,449.9844 490,449.9844 490,439.9844 L490,349.5 " fill="#85BBF0" filter="url(#f1m3692ejtygng)" style="stroke:#000000;stroke-width:1.5;"/><path d="M490,349.5 C490,359.5 550,359.5 550,359.5 C550,359.5 610,359.5 610,349.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="41" x="529.5" y="376.4951">LDAP</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="65" x="517.5" y="392.792">openldap</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="552" y="409.0889"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="500" y="425.3857">holds the user</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="537" y="441.6826">data</text><!--MD5=[281da49c08c131cf737354df9e15b447]
entity id_connector_listener--><rect fill="#85BBF0" filter="url(#f1m3692ejtygng)" height="101.4844" rx="35" ry="35" style="stroke:#000000;stroke-width:1.5;" width="189" x="262.5" y="541.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="169" x="272.5" y="564.4951">ID-Connector listener</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="144" x="285" y="580.792">python listener script</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="359" y="597.0889"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="285" y="613.3857">Handles write events</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="276.5" y="629.6826">to ldap for id-connector</text><!--MD5=[99b62bfbb382e5518d8183612fd94eeb]
entity cronjob--><rect fill="#438DD5" filter="url(#f1m3692ejtygng)" height="101.4844" style="stroke:#6A8198;stroke-width:1.5;" width="203" x="486.5" y="541.5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="62" x="557" y="564.4951">Cronjob</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="49" x="563.5" y="580.792">python</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="590" y="597.0889"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="514" y="613.3857">Trigger user changes</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="496.5" y="629.6826">according to validity period</text><!--MD5=[751701bbc6877bdbbaa682a37c49d882]
entity small_in_queue--><polygon fill="#B0CAE4" filter="url(#f1m3692ejtygng)" points="496,734.5,542,734.5,549,755.5,642,755.5,642,853.9844,496,853.9844,496,734.5" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="496" x2="549" y1="755.5" y2="755.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="116" x="506" y="775.4951">Small in-queue</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="43" x="542.5" y="791.792">Folder</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="566" y="808.0889"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="518" y="824.3857">json files with</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="525.5" y="840.6826">entryUUIDs</text><!--MD5=[7a87314abcdb133a5add9c6f723cc112]
entity udm_rest_api--><rect fill="#85BBF0" filter="url(#f1m3692ejtygng)" height="101.4844" rx="35" ry="35" style="stroke:#000000;stroke-width:1.5;" width="169" x="484.5" y="1480.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="109" x="514.5" y="1503.4951">UDM REST API</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="54" x="542" y="1519.792">tornado</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="571" y="1536.0889"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="496" y="1552.3857">enriches ldap access</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="494.5" y="1568.6826">with ucs specific logic</text><!--MD5=[995a46705506099b563611b182911a66]
entity daemon--><rect fill="#438DD5" filter="url(#f1m3692ejtygng)" height="117.7813" style="stroke:#6A8198;stroke-width:1.5;" width="207" x="465.5" y="971"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="64" x="537" y="993.9951">Daemon</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="49" x="544.5" y="1010.292">python</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="571" y="1026.5889"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="492.5" y="1042.8857">Reads uuid and writes</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="475.5" y="1059.1826">json representation of udm</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="543.5" y="1075.4795">objects</text><!--MD5=[2a65fec48215b5e83ef9c877824fc6e9]
entity school_provider_a--><rect fill="#85BBF0" filter="url(#f1m3692ejtygng)" height="36.2969" rx="35" ry="35" style="stroke:#000000;stroke-width:1.5;" width="144" x="44" y="1741.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="54" y="1764.4951">school_provider_a</text><!--MD5=[27ac283c215a21cdee0aa5a1b2a377e2]
entity school_provider_b--><rect fill="#85BBF0" filter="url(#f1m3692ejtygng)" height="36.2969" rx="35" ry="35" style="stroke:#000000;stroke-width:1.5;" width="145" x="232.5" y="1741.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="242.5" y="1764.4951">school_provider_b</text><!--MD5=[66d1d04299b4c4c658fd872e3c9f0a8d]
link sms to import--><path d="M550,101.92 C550,127.89 550,161.3 550,188.15 " fill="none" id="sms-to-import" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="550,193.43,554,184.43,550,188.43,546,184.43,550,193.43" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144" x="551" y="144.5669">export of user data</text><text fill="#666666" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="45" x="600.5" y="159.6997">python</text><!--MD5=[7db061270a73eefed2a13f0e34a7b051]
link import to ldap--><path d="M550,278.53 C550,295.58 550,315.64 550,334.19 " fill="none" id="import-to-ldap" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="550,339.38,554,330.38,550,334.38,546,330.38,550,339.38" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[433da8e03921192abfc4311c80a612f2]
link ldap to id_connector_listener--><path d="M496.5,449.7 C469.38,477.17 436.56,510.4 409.58,537.74 " fill="none" id="ldap-to-id_connector_listener" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="405.98,541.39,415.1508,537.7988,409.494,537.8331,409.4598,532.1764,405.98,541.39" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="158" x="466" y="492.5669">calls listener on write</text><text fill="#666666" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="45" x="522.5" y="507.6997">python</text><!--MD5=[9bf82f785f1831ad9492847e966565e2]
link id_connector_listener to small_in_queue--><path d="M389.74,642.64 C404.42,663 422.75,686.06 442,704.5 C456.94,718.81 474.37,732.52 491.46,744.69 " fill="none" id="id_connector_listener-to-small_in_queue" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="495.79,747.75,490.7463,739.2906,491.706,744.8655,486.1311,745.8251,495.79,747.75" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="125" x="443" y="685.5669">Write entryUUIDs</text><text fill="#666666" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="26" x="492.5" y="700.6997">json</text><!--MD5=[1487429b1484b1232620574917a33dce]
link cronjob to small_in_queue--><path d="M583.28,642.7 C580.8,668.83 577.72,701.17 575.07,729.15 " fill="none" id="cronjob-to-small_in_queue" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="574.57,734.32,579.4018,725.7378,575.042,729.3423,571.4375,724.9826,574.57,734.32" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="125" x="581" y="685.5669">Write entryUUIDs</text><text fill="#666666" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="26" x="630.5" y="700.6997">json</text><!--MD5=[01c7d6a3703200fe77faeac5c4aff21d]
reverse link small_in_queue to daemon--><path d="M569,858.83 C569,893.73 569,936.64 569,970.64 " fill="none" id="small_in_queue-backto-daemon" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="569,853.75,565,862.75,569,858.75,573,862.75,569,853.75" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="125" x="570" y="896.5669">Read entryUUIDS</text><text fill="#666666" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="45" x="610" y="911.6997">python</text><!--MD5=[a9f707de9769965671967798d24e053b]
link daemon to large_in_queue--><path d="M491.09,1089.18 C464.22,1109.25 434.26,1131.62 407.89,1151.32 " fill="none" id="daemon-to-large_in_queue" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="403.69,1154.45,413.29,1152.25,407.69,1151.45,408.49,1145.85,403.69,1154.45" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[16646b1c40ca33a6087cd39e99256ce6]
link uuid_record_cache to large_in_queue--><path d="M336,1098.98 C336,1115.51 336,1133.02 336,1148.93 " fill="none" id="uuid_record_cache-large_in_queue" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="336,1154.26,340,1145.26,336,1149.26,332,1145.26,336,1154.26" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="336,1093.82,332,1102.82,336,1098.82,340,1102.82,336,1093.82" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[a5534412a2bd102b7215437d1aa51fc1]
reverse link large_in_queue to async_job--><path d="M261.64,1260.69 C235.85,1279.31 207.07,1300.08 181.75,1318.36 " fill="none" id="large_in_queue-backto-async_job" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="265.75,1257.72,256.1114,1259.7442,261.6959,1260.6464,260.7937,1266.2309,265.75,1257.72" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[9027d155f7ac5bd005d9eaddd3877f8b]
link async_job to out_queue_a--><path d="M113.93,1419.75 C114.41,1445.4 114.99,1475.91 115.41,1498.33 " fill="none" id="async_job-to-out_queue_a" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="115.5,1503.55,119.3192,1494.4718,115.4,1498.551,111.3208,1494.6318,115.5,1503.55" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[e17d3b570877514a29ee42294b9ce519]
link out_queue_a to out_a--><path d="M116,1558.11 C116,1581.45 116,1615.27 116,1637.32 " fill="none" id="out_queue_a-to-out_a" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="116,1642.39,120,1633.39,116,1637.39,112,1633.39,116,1642.39" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[f572066c290b686b345433416987adfc]
link out_a to school_provider_a--><path d="M116,1678.84 C116,1694.84 116,1718.69 116,1736.12 " fill="none" id="out_a-to-school_provider_a" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="116,1741.31,120,1732.31,116,1736.31,112,1732.31,116,1741.31" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[0760febd1bba0fc81a79c02d7c817e6e]
link async_job to out_queue_b--><path d="M172.44,1419.53 C204.35,1446.12 242.59,1478 269.79,1500.66 " fill="none" id="async_job-to-out_queue_b" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="273.72,1503.93,269.3797,1495.0891,269.8836,1500.7234,264.2492,1501.2273,273.72,1503.93" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[6049a3ef58aa70c8891f7f818e65d62f]
link out_queue_b to out_b--><path d="M305,1558.11 C305,1581.45 305,1615.27 305,1637.32 " fill="none" id="out_queue_b-to-out_b" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="305,1642.39,309,1633.39,305,1637.39,301,1633.39,305,1642.39" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[7038b640b3daffc987451c364fc69fab]
link out_b to school_provider_b--><path d="M305,1678.84 C305,1694.84 305,1718.69 305,1736.12 " fill="none" id="out_b-to-school_provider_b" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="305,1741.31,309,1732.31,305,1736.31,301,1732.31,305,1741.31" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[3f3c7a9f9d09b33dda80c650d54e7aed]
link daemon to udm_rest_api--><path d="M569,1089.22 C569,1186.36 569,1380.19 569,1475.09 " fill="none" id="daemon-to-udm_rest_api" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="569,1480.36,573,1471.36,569,1475.36,565,1471.36,569,1480.36" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[3b2f4579f1f94ec38f2d77a181df14fb]
link udm_rest_api to ldap--><path d="M653.71,1490.8 C697.96,1463.93 743,1423.45 743,1370 C743,591 743,591 743,591 C743,516.16 670.49,459.62 614.36,427.06 " fill="none" id="udm_rest_api-to-ldap" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="610.01,424.56,615.834,432.5023,614.3495,427.0438,619.808,425.5592,610.01,424.56" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="156" x="744" y="1027.0669">Read/write user data</text><text fill="#666666" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="77" x="783.5" y="1042.1997">python-ldap</text><!--MD5=[57156ba74f1a21451eccc80d4405fb8f]
link management_api to udm_rest_api--><path d="M408.13,1419.53 C434.9,1437.91 465.34,1458.82 492.49,1477.46 " fill="none" id="management_api-to-udm_rest_api" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="496.81,1480.43,491.6597,1472.0351,492.6898,1477.5974,487.1275,1478.6274,496.81,1480.43" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[418301a004f8cd7756ff0b7740494a7c]
reverse link large_in_queue to management_api--><path d="M336,1262.98 C336,1281.05 336,1300.93 336,1318.49 " fill="none" id="large_in_queue-backto-management_api" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="336,1257.94,332,1266.94,336,1262.94,340,1266.94,336,1257.94" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[f43d19375501ef7962306b37f5da0a81]
link management_api to out_queue_a--><path d="M267.9,1419.53 C231.18,1446.23 187.15,1478.26 155.96,1500.93 " fill="none" id="management_api-to-out_queue_a" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="151.84,1503.93,161.4704,1501.8674,155.8824,1500.9874,156.7624,1495.3994,151.84,1503.93" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[74074bbcc5263239370f5f5fce36ba13]
link management_api to out_queue_b--><path d="M326.36,1419.75 C321.37,1445.5 315.43,1476.17 311.08,1498.61 " fill="none" id="management_api-to-out_queue_b" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="310.12,1503.55,315.7712,1495.4838,311.0786,1498.6427,307.9196,1493.9501,310.12,1503.55" style="stroke:#666666;stroke-width:1.0;"/><!--MD5=[68ba9d0ab2722b32e44110faa90602bf]
@startuml


skinparam defaultTextAlignment center

skinparam AgentBackgroundColor #438dd5
skinparam AgentFontColor white
skinparam AgentBorderColor #6a8198

skinparam StorageBackgroundColor #85bbf0
skinparam DatabaseBackgroundColor #85bbf0
skinparam FolderBackgroundColor #b0cae4
skinparam FileBackgroundColor lightgrey

skinparam ArrowColor #666666
skinparam ArrowFontColor #666666

skinparam FrameBackgroundColor #ebedf1


' <b>\n<i>\n\n

agent "<b>School management software\n<i>custom system\n\nmanages users on state level" as sms

storage "<b>UCS@School import\n<i>python\n\nImport user data" as import

database "<b>LDAP\n<i>openldap\n\nholds the user\n data" as ldap

storage "<b>ID-Connector listener\n<i>python listener script\n\nHandles write events\nto ldap for id-connector" as id_connector_listener

agent "<b>Cronjob\n<i>python\n\nTrigger user changes\naccording to validity period" as cronjob

folder "<b>Small in-queue\n<i>Folder\n\njson files with\nentryUUIDs" as small_in_queue

storage "<b>UDM REST API\n<i>tornado\n\nenriches ldap access\nwith ucs specific logic" as udm_rest_api



agent "<b>Daemon\n<i>python\n\nReads uuid and writes\njson representation of udm\nobjects" as daemon

frame ID-Connector {



    agent "<b>Management REST API\n<i>fastapi\n\nstops events from\nreaching ldap" as management_api

    folder "<b>Large in-queue\n<i>Folder\n\njson files with full data" as large_in_queue

    database "<b>UUID record cache\n<i>sqlite\n\nstores uuid->\n(record_uid,school, ...) \nmapping" as uuid_record_cache

    agent "<b>Async job\n<i>python\n\nputs json files into right\n out queue" as async_job

    folder "out_queue_a" as out_queue_a

    folder "out_queue_b" as out_queue_b

    agent "out_a" as out_a

    agent "out_b" as out_b

}

storage "school_provider_a" as school_provider_a

storage "school_provider_b" as school_provider_b

sms - -> import : <b>export of user data\n<i>python
import - -> ldap
ldap - -> id_connector_listener : <b>calls listener on write\n<i>python
id_connector_listener - -> small_in_queue: <b>Write entryUUIDs\n<i>json
cronjob - -> small_in_queue: <b>Write entryUUIDs\n<i>json
small_in_queue <- - daemon: <b>Read entryUUIDS\n<i>python
'daemon-up->small_in_queue
daemon - -> large_in_queue
'large_in_queue <- ->uuid_record_cache
 uuid_record_cache <- -> large_in_queue
large_in_queue <- - async_job
async_job - -> out_queue_a
out_queue_a - -> out_a
out_a - -> school_provider_a
async_job - -> out_queue_b
out_queue_b - -> out_b
out_b - -> school_provider_b
daemon - -> udm_rest_api
udm_rest_api - -> ldap: <b>Read/write user data\n<i>python-ldap
management_api - -> udm_rest_api
large_in_queue <- - management_api
management_api - -> out_queue_a
management_api - -> out_queue_b



folder Test {
    File entryUUIDs
}

@enduml

@startuml


skinparam defaultTextAlignment center

skinparam AgentBackgroundColor #438dd5
skinparam AgentFontColor white
skinparam AgentBorderColor #6a8198

skinparam StorageBackgroundColor #85bbf0
skinparam DatabaseBackgroundColor #85bbf0
skinparam FolderBackgroundColor #b0cae4
skinparam FileBackgroundColor lightgrey

skinparam ArrowColor #666666
skinparam ArrowFontColor #666666

skinparam FrameBackgroundColor #ebedf1



agent "<b>School management software\n<i>custom system\n\nmanages users on state level" as sms

storage "<b>UCS@School import\n<i>python\n\nImport user data" as import

database "<b>LDAP\n<i>openldap\n\nholds the user\n data" as ldap

storage "<b>ID-Connector listener\n<i>python listener script\n\nHandles write events\nto ldap for id-connector" as id_connector_listener

agent "<b>Cronjob\n<i>python\n\nTrigger user changes\naccording to validity period" as cronjob

folder "<b>Small in-queue\n<i>Folder\n\njson files with\nentryUUIDs" as small_in_queue

storage "<b>UDM REST API\n<i>tornado\n\nenriches ldap access\nwith ucs specific logic" as udm_rest_api



agent "<b>Daemon\n<i>python\n\nReads uuid and writes\njson representation of udm\nobjects" as daemon

frame ID-Connector {



    agent "<b>Management REST API\n<i>fastapi\n\nstops events from\nreaching ldap" as management_api

    folder "<b>Large in-queue\n<i>Folder\n\njson files with full data" as large_in_queue

    database "<b>UUID record cache\n<i>sqlite\n\nstores uuid->\n(record_uid,school, ...) \nmapping" as uuid_record_cache

    agent "<b>Async job\n<i>python\n\nputs json files into right\n out queue" as async_job

    folder "out_queue_a" as out_queue_a

    folder "out_queue_b" as out_queue_b

    agent "out_a" as out_a

    agent "out_b" as out_b

}

storage "school_provider_a" as school_provider_a

storage "school_provider_b" as school_provider_b

sms - -> import : <b>export of user data\n<i>python
import - -> ldap
ldap - -> id_connector_listener : <b>calls listener on write\n<i>python
id_connector_listener - -> small_in_queue: <b>Write entryUUIDs\n<i>json
cronjob - -> small_in_queue: <b>Write entryUUIDs\n<i>json
small_in_queue <- - daemon: <b>Read entryUUIDS\n<i>python
daemon - -> large_in_queue
 uuid_record_cache <- -> large_in_queue
large_in_queue <- - async_job
async_job - -> out_queue_a
out_queue_a - -> out_a
out_a - -> school_provider_a
async_job - -> out_queue_b
out_queue_b - -> out_b
out_b - -> school_provider_b
daemon - -> udm_rest_api
udm_rest_api - -> ldap: <b>Read/write user data\n<i>python-ldap
management_api - -> udm_rest_api
large_in_queue <- - management_api
management_api - -> out_queue_a
management_api - -> out_queue_b



folder Test {
    File entryUUIDs
}

@enduml

PlantUML version 1.2021.14(Fri Nov 12 17:46:50 CET 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
